# üìÑ –†–µ–∑—é–º–µ –¥–ª—è Cursor IDE - SigmaTrade Bot

**–ü—Ä–æ–µ–∫—Ç:** SigmaTrade Bot (Python –≤–µ—Ä—Å–∏—è)  
**–°—Ç–∞—Ç—É—Å:** 98% –≥–æ—Ç–æ–≤ –∫ production  
**–ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è:** –ù–∞–≤–µ–¥–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

---

## üéØ –¶–ï–õ–¨

–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å Python –≤–µ—Ä—Å–∏—é –±–æ—Ç–∞ –∫ production –¥–µ–ø–ª–æ—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ 34.88.234.78 —á–µ—Ä–µ–∑ —É–ª—É—á—à–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ health checks –∏ —Ñ–∏–Ω–∞–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

---

## üìä –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (98%)
- –í—Å–µ Python –º–æ–¥–µ–ª–∏, repositories, services
- BlockchainService —Å Web3.py
- –í—Å–µ bot handlers –∏ middlewares
- FSM states
- Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- Alembic –º–∏–≥—Ä–∞—Ü–∏–∏
- Background jobs (Dramatiq + APScheduler)
- –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### ‚ö†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å (2%)
- –£–ª—É—á—à–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –°–æ–∑–¥–∞—Ç—å health check —Å–∫—Ä–∏–ø—Ç
- –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã –≤ settings.py
- –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- –°–æ–∑–¥–∞—Ç—å unit —Ç–µ—Å—Ç—ã
- –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

---

## üî• –ü–†–ò–û–†–ò–¢–ï–¢–ù–´–ï –ó–ê–î–ê–ß–ò

### P0 - –ö—Ä–∏—Ç–∏—á–Ω–æ (2-3 —á–∞—Å–∞)

1. **validate-env.py** - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤
   - Telegram token —Ñ–æ—Ä–º–∞—Ç
   - Wallet address —Ñ–æ—Ä–º–∞—Ç
   - Database URL —Ñ–æ—Ä–º–∞—Ç
   - –°–ª–∞–±—ã–µ –ø–∞—Ä–æ–ª–∏

2. **health-check.sh** - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ PostgreSQL –∏ Redis
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –Ω–∞ –æ—à–∏–±–∫–∏
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ

3. **settings.py** - –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã Pydantic
   - @field_validator –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–æ–ª–µ–π
   - @model_validator –¥–ª—è production
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ DEBUG=False –≤ production

4. **docker-entrypoint.sh** - –£–ª—É—á—à–∏—Ç—å –∑–∞–ø—É—Å–∫
   - Wait —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è PostgreSQL/Redis
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
   - –õ—É—á—à–µ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

5. **bot/main.py** - –ì–ª–æ–±–∞–ª—å–Ω—ã–π error handler
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∞–º
   - –ü–æ–ª–Ω—ã–π traceback

6. **.env.example** - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
   - –û–ø–∏—Å–∞–Ω–∏–µ –∫–∞–∂–¥–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–µ–π
   - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### P1 - –í–∞–∂–Ω–æ (1-2 —á–∞—Å–∞)

7. **test_settings.py** - Unit —Ç–µ—Å—Ç—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
8. **DEPLOY_TO_SERVER.md** - –†–∞–∑–¥–µ–ª "–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã"

---

## üìÅ –§–ê–ô–õ–´ –î–õ–Ø –†–ê–ë–û–¢–´

### –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

1. `scripts/validate-env.py` - –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ñ–æ—Ä–º–∞—Ç–æ–≤
2. `scripts/health-check.sh` - **–°–û–ó–î–ê–¢–¨ –ù–û–í–´–ô**
3. `app/config/settings.py` - –î–æ–±–∞–≤–∏—Ç—å Pydantic –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã
4. `docker-entrypoint.sh` - –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É
5. `bot/main.py` - –î–æ–±–∞–≤–∏—Ç—å error handler
6. `.env.example` - –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
7. `tests/unit/test_settings.py` - **–°–û–ó–î–ê–¢–¨ –ù–û–í–´–ô**
8. `DEPLOY_TO_SERVER.md` - –î–æ–±–∞–≤–∏—Ç—å troubleshooting

---

## üõ†Ô∏è –ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ –≠–¢–ò –ò–ù–°–¢–†–£–ö–¶–ò–ò

### –®–∞–≥ 1: –ü—Ä–æ—á–∏—Ç–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:**
- `CURSOR_INSTRUCTIONS_SERVER_CLEANUP.md` - –ü–æ–ª–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- `QUICK_START_GUIDE.md` - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

**–î–ª—è —Å–ø—Ä–∞–≤–∫–∏:**
- `COMMANDS_CHEATSHEET.md` - –ü–∞–º—è—Ç–∫–∞ –∫–æ–º–∞–Ω–¥
- `DEPLOYMENT_CHECKLIST.md` - –ß–µ–∫–ª–∏—Å—Ç –¥–µ–ø–ª–æ—è

### –®–∞–≥ 2: –í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–¥–∞—á–∏

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Cursor IDE –¥–ª—è:**
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞ –ø–æ –ø—Ä–∏–º–µ—Ä–∞–º –∏–∑ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
- –ü—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
- –ó–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤

**–°–ª–µ–¥—É–π—Ç–µ QUICK_START_GUIDE.md:**
- ~30 –º–∏–Ω—É—Ç –Ω–∞ –≤—Å–µ –∑–∞–¥–∞—á–∏
- –ß–µ—Ç–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —á—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª
- –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

```bash
# –í–∞–ª–∏–¥–∞—Ü–∏—è
python3 scripts/validate-env.py

# –¢–µ—Å—Ç—ã
pytest tests/ -v

# Docker
docker build -f Dockerfile.python -t sigmatrade:test .

# –°–∏–Ω—Ç–∞–∫—Å–∏—Å bash
bash -n scripts/health-check.sh
bash -n docker-entrypoint.sh
```

### –®–∞–≥ 4: –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å

```bash
git add .
git commit -m "chore: production deployment preparation"
git push origin claude/sigmatradebot-python-migration-01UUhWd7yPartmZdGxtPAFLo
```

### –®–∞–≥ 5: –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /opt/sigmatradebot
./scripts/server-deploy.sh
```

---

## ‚è±Ô∏è –û–¶–ï–ù–ö–ê –í–†–ï–ú–ï–ù–ò

- **–ß—Ç–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:** 15 –º–∏–Ω—É—Ç
- **P0 –∑–∞–¥–∞—á–∏:** 2-3 —á–∞—Å–∞
- **P1 –∑–∞–¥–∞—á–∏:** 1-2 —á–∞—Å–∞
- **–ü—Ä–æ–≤–µ—Ä–∫–∞:** 30 –º–∏–Ω—É—Ç
- **–î–µ–ø–ª–æ–π:** 30 –º–∏–Ω—É—Ç

**–ò—Ç–æ–≥–æ: 4-6 —á–∞—Å–æ–≤** –¥–ª—è –ø–æ–ª–Ω–æ–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

---

## üéì –û–ë–£–ß–ê–Æ–©–ò–ï –ü–†–ò–ú–ï–†–´

### –ü—Ä–∏–º–µ—Ä 1: –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ settings.py

```python
from pydantic import field_validator
import re

@field_validator('telegram_bot_token')
@classmethod
def validate_bot_token(cls, v: str) -> str:
    pattern = r'^\d+:[A-Za-z0-9_-]{35}$'
    if not re.match(pattern, v):
        raise ValueError('Invalid token format')
    return v
```

### –ü—Ä–∏–º–µ—Ä 2: Health check bash

```bash
#!/bin/bash
log() { echo -e "\033[0;32m‚úÖ\033[0m $1"; }
error() { echo -e "\033[0;31m‚ùå\033[0m $1"; }

if docker exec sigmatrade-postgres pg_isready &>/dev/null; then
    log "PostgreSQL healthy"
else
    error "PostgreSQL not responding"
    exit 1
fi
```

### –ü—Ä–∏–º–µ—Ä 3: Error handler –≤ bot

```python
from aiogram.types import ErrorEvent
from loguru import logger

async def error_handler(event: ErrorEvent, bot: Bot) -> None:
    logger.error("Error occurred", exc_info=event.exception)
    # Notify admins
    for admin_id in settings.get_admin_ids():
        await bot.send_message(admin_id, "Error occurred!")
```

---

## üîó –°–¢–†–£–ö–¢–£–†–ê –î–û–ö–£–ú–ï–ù–¢–û–í

```
docs/cursor/
‚îú‚îÄ‚îÄ README.md (–≠–¢–û)
‚îú‚îÄ‚îÄ CURSOR_INSTRUCTIONS_SERVER_CLEANUP.md  ‚Üê –ì–ª–∞–≤–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
‚îú‚îÄ‚îÄ QUICK_START_GUIDE.md                   ‚Üê –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (30 –º–∏–Ω)
‚îú‚îÄ‚îÄ COMMANDS_CHEATSHEET.md                 ‚Üê –ü–∞–º—è—Ç–∫–∞ –∫–æ–º–∞–Ω–¥
‚îî‚îÄ‚îÄ DEPLOYMENT_CHECKLIST.md                ‚Üê –ß–µ–∫–ª–∏—Å—Ç –¥–µ–ø–ª–æ—è
```

**–ù–∞—á–Ω–∏—Ç–µ —Å:**
1. README.md (—ç—Ç–æ—Ç —Ñ–∞–π–ª) - –æ–±—â–µ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ
2. QUICK_START_GUIDE.md - —á—Ç–æ –¥–µ–ª–∞—Ç—å –ø–µ—Ä–≤—ã–º
3. CURSOR_INSTRUCTIONS_SERVER_CLEANUP.md - –¥–µ—Ç–∞–ª–∏

---

## ‚úÖ –ö–†–ò–¢–ï–†–ò–ò –£–°–ü–ï–•–ê

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ production –∫–æ–≥–¥–∞:

- [ ] –í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –∏–∑ P0 –∑–∞–¥–∞—á —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] Health check —Å–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ ‚úÖ
- [ ] Docker –æ–±—Ä–∞–∑ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞
- [ ] –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ /start –≤ Telegram

---

## üìû –ï–°–õ–ò –ß–¢–û-–¢–û –ù–ï–ü–û–ù–Ø–¢–ù–û

1. **–ß–∏—Ç–∞–π—Ç–µ CURSOR_INSTRUCTIONS_SERVER_CLEANUP.md**
   - –¢–∞–º –¥–µ—Ç–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Å–æ –≤—Å–µ–º–∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–æ–¥–∞

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ QUICK_START_GUIDE.md**
   - –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —Å –≥–æ—Ç–æ–≤—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏

3. **–°–º–æ—Ç—Ä–∏—Ç–µ COMMANDS_CHEATSHEET.md**
   - –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Ä–≤–µ—Ä–æ–º

4. **–°–ª–µ–¥—É–π—Ç–µ DEPLOYMENT_CHECKLIST.md**
   - –ü–æ—à–∞–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç –±–µ–∑ –ø—Ä–æ–ø—É—Å–∫–æ–≤

---

## üöÄ –ù–ê–ß–ê–õ–û –†–ê–ë–û–¢–´

**–ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å? –û—Ç–∫—Ä–æ–π—Ç–µ:**

```
docs/cursor/QUICK_START_GUIDE.md
```

–ò —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º. –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ~30 –º–∏–Ω—É—Ç.

---

## üí° –°–û–í–ï–¢

–†–∞–±–æ—Ç–∞–π—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ:
1. –°–Ω–∞—á–∞–ª–∞ –≤—Å–µ P0 –∑–∞–¥–∞—á–∏
2. –ó–∞—Ç–µ–º P1 –∑–∞–¥–∞—á–∏
3. –ü–æ—Ç–æ–º –ø—Ä–æ–≤–µ—Ä–∫–∞
4. –ò —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ - –¥–µ–ø–ª–æ–π

–ù–µ –ø—Ä–æ–ø—É—Å–∫–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏!

---

**–ì–æ—Ç–æ–≤–æ! –£—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è! üéâ**

